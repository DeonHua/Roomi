<link rel="stylesheet" type="../css" href="css.css" media="screen" />
<!--<script>
    window.onload=function(){
        var elem = document.getElementById('chat_box');
        elem.scrollTop = elem.scrollHeight;
    };
</script>-->
<section class="messages container">
    <div class = "row">
        <div class = "col s12 l8 offset-l2">
            <h3>Messages <span class="badge msg">{{messages[0].messages.length}} messages</span></h3>
            <div class = "card">
                <div class = "card-content" id="chat_box">
                        <div ng-repeat="msg in messages[0].messages"
                            ng-init="userInfo=identifyUser(msg)"
                             ng-switch="{{userInfo.isUser}}">
                            <div ng-switch-when="true" class="bubble_user">
                                <p><b>{{userInfo.userName}}</b></p>
                                <p>{{msg.message}}</p>
                            </div>
                            <div ng-switch-when="false" class="bubble_other">
                                <p><b>{{userInfo.userName}}</b></p>
                                <p>{{msg.message}}</p>
                            </div>
                        </div>
                </div>
                <form class="col s12 l12" ng-show="$root.currentUser">
                    <div class="row" style="margin-bottom:0">
                        <div class="input-field col s12 l12  teal lighten-5 black-text">
                            <div class="col s11 l11">
                            <textarea id="textarea1" class="materialize-textarea" ng-model="message"></textarea>
                            </div>
                            <div class="col s1 l1 valign-wrappe">
                           <i class=" medium mdi-content-send valign"  ng-click="say(message); message='';"></i>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
